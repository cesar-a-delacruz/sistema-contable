package com.nutrehogar.sistemacontable.ui;

import com.nutrehogar.sistemacontable.ui.crud.AccountSubtypeView;
import com.formdev.flatlaf.extras.FlatSVGIcon;
import com.nutrehogar.sistemacontable.application.config.Theme;
import com.nutrehogar.sistemacontable.model.User;
//import com.nutrehogar.sistemacontable.ui.crud.AccountView;
//import com.nutrehogar.sistemacontable.ui.crud.UserView;
import com.nutrehogar.sistemacontable.ui.crud.AccountView;
import com.nutrehogar.sistemacontable.ui.crud.UserView;
import com.nutrehogar.sistemacontable.ui_2.component.UserListPanel;

import org.jetbrains.annotations.Contract;
import org.jetbrains.annotations.NotNull;

import javax.swing.*;
import java.awt.*;

public class DashboardView extends JPanel {
    @NotNull
    private User user;
    public DashboardView(@NotNull User adminUser) {
        this.user = adminUser;
        initComponents();
        btnHome.setIcon(new FlatSVGIcon("svgs/home.svg", Theme.ICON_MD, Theme.ICON_MD));
        btnShowFormView.setIcon(getIcon("svgs/form.svg"));
        btnShowJournalView.setIcon(getIcon("svgs/journal.svg"));
        btnShowTrialBalanceView.setIcon(getIcon("svgs/trial_balance.svg"));
        btnShowGeneralLedgerView.setIcon(getIcon("svgs/general_ledger.svg"));
        btnShowAccountView.setIcon(getIcon("svgs/account.svg"));
        btnShowAccountSubtypeView.setIcon(getIcon("svgs/account_subtype.svg"));
        btnShowBackupView.setIcon(getIcon("svgs/backup.svg"));
        btnShowUserView.setIcon(UserListPanel.UserListElement.userIcon.derive(Theme.ICON_LG, Theme.ICON_LG));
        pnlNav.setVisible(false);
        pnlContent.setOpaque(false);
        buttonPermissionSettings();
        setupViewListeners();
    }

    @Contract(value = "_ -> new", pure = true)
    private @NotNull FlatSVGIcon getIcon(@NotNull String iconName) {
        return new FlatSVGIcon(iconName, Theme.ICON_LG, Theme.ICON_LG);
    }

    public void setUser(@NotNull User user) {
        this.user = user;
        buttonPermissionSettings();
    }

    private void buttonPermissionSettings() {
        if (user.isAdmin()) return;
        btnShowUserView.setVisible(false);
        btnShowBackupView.setEnabled(false);
    }

    public void setupViewListeners() {
//        getBtnShowFormView()
//                .addActionListener(e -> setContent(context.getBean(AccountingEntryFormController.class).getView()));
        btnShowAccountSubtypeView.addActionListener(_ -> setContent(new AccountSubtypeView(user)));
        btnShowAccountView.addActionListener(_->setContent(new AccountView(user)));
        btnShowUserView.addActionListener(_->setContent(new UserView(user)));
//        getBtnShowAccountView().addActionListener(e -> {
//            setContent(context.getBean(AccountController.class).getView());
//            context.getBean(AccountController.class).loadData();
//        });
//        getBtnShowJournalView().addActionListener(e -> {
//            setContent(context.getBean(JournalController.class).getView());
//            context.getBean(JournalController.class).loadData();
//        });
//        getBtnShowTrialBalanceView().addActionListener(e -> {
//            setContent(context.getBean(TrialBalanceController.class).getView());
//            context.getBean(TrialBalanceController.class).loadData();
//        });
//        getBtnShowGeneralLedgerView().addActionListener(e -> {
//            setContent(context.getBean(GeneralLedgerController.class).getView());
//            context.getBean(GeneralLedgerController.class).loadDataSubtype();
//            context.getBean(GeneralLedgerController.class).loadDataAccount();
//        });
//        getBtnShowBackupView().addActionListener(e -> context.getBean(BackupController.class).showView());
            btnHome.addActionListener(_ -> setContent(pnlHome));
//        getBtnShowUserView().addActionListener(e -> setContent(context.getBean(UserController.class).getView()));
    }

    public void setContent(JPanel p) {
        SwingUtilities.invokeLater(() -> {
            if (p != pnlHome) {
                pnlNav.setVisible(true);
            } else {
                pnlNav.setVisible(false);
                btnShowFormView.setBackground(Color.WHITE);
                btnShowJournalView.setBackground(Color.WHITE);
                btnShowTrialBalanceView.setBackground(Color.WHITE);
                btnShowGeneralLedgerView.setBackground(Color.WHITE);
                btnShowAccountView.setBackground(Color.WHITE);
                btnShowAccountSubtypeView.setBackground(Color.WHITE);
            }
            pnlContent.removeAll();
            pnlContent.setLayout(new BorderLayout());
            pnlContent.add(p, BorderLayout.CENTER);
            pnlContent.revalidate();
            pnlContent.repaint();
        });
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated
    // <editor-fold defaultstate="collapsed" desc="Generated
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        pnlContent = new javax.swing.JPanel();
        pnlHome = new javax.swing.JPanel();
        pnlGroupBtn = new javax.swing.JPanel();
        btnShowFormView = new com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton();
        btnShowAccountView = new com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton();
        btnShowTrialBalanceView = new com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton();
        btnShowAccountSubtypeView = new com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton();
        btnShowGeneralLedgerView = new com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton();
        btnShowJournalView = new com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton();
        btnShowUserView = new com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton();
        pnlNav = new javax.swing.JPanel();
        btnShowBackupView = new com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton();
        btnHome = new com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton();

        setBackground(new java.awt.Color(255, 255, 255));

        pnlContent.setOpaque(false);

        pnlHome.setOpaque(false);

        pnlGroupBtn.setOpaque(false);

        btnShowFormView.setText("Formulario");

        btnShowAccountView.setText("Cuentas");

        btnShowTrialBalanceView.setText("Balance de Comprobaci√≥n");

        btnShowAccountSubtypeView.setText("Subtipos de Cuentas");
        btnShowAccountSubtypeView.setToolTipText("");

        btnShowGeneralLedgerView.setText("Mayor General");

        btnShowJournalView.setText("Libro Diario");

        btnShowUserView.setText("Usuarios");

        javax.swing.GroupLayout pnlGroupBtnLayout = new javax.swing.GroupLayout(pnlGroupBtn);
        pnlGroupBtn.setLayout(pnlGroupBtnLayout);
        pnlGroupBtnLayout.setHorizontalGroup(
            pnlGroupBtnLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlGroupBtnLayout.createSequentialGroup()
                .addGroup(pnlGroupBtnLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(btnShowUserView, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(btnShowAccountView, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(btnShowTrialBalanceView, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(btnShowFormView, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(15, 15, 15)
                .addGroup(pnlGroupBtnLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(btnShowAccountSubtypeView, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(btnShowGeneralLedgerView, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(btnShowJournalView, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
        );
        pnlGroupBtnLayout.setVerticalGroup(
            pnlGroupBtnLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlGroupBtnLayout.createSequentialGroup()
                .addGroup(pnlGroupBtnLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnlGroupBtnLayout.createSequentialGroup()
                        .addComponent(btnShowFormView, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btnShowTrialBalanceView, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btnShowAccountView, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(pnlGroupBtnLayout.createSequentialGroup()
                        .addComponent(btnShowJournalView, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btnShowGeneralLedgerView, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btnShowAccountSubtypeView, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addGap(5, 5, 5)
                .addComponent(btnShowUserView, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout pnlHomeLayout = new javax.swing.GroupLayout(pnlHome);
        pnlHome.setLayout(pnlHomeLayout);
        pnlHomeLayout.setHorizontalGroup(
            pnlHomeLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlHomeLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(pnlGroupBtn, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        pnlHomeLayout.setVerticalGroup(
            pnlHomeLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlHomeLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(pnlGroupBtn, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout pnlContentLayout = new javax.swing.GroupLayout(pnlContent);
        pnlContent.setLayout(pnlContentLayout);
        pnlContentLayout.setHorizontalGroup(
            pnlContentLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlContentLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(pnlHome, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        pnlContentLayout.setVerticalGroup(
            pnlContentLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlContentLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(pnlHome, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        pnlNav.setOpaque(false);

        btnShowBackupView.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        btnShowBackupView.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btnShowBackupView.setVerticalTextPosition(javax.swing.SwingConstants.CENTER);

        btnHome.setText("Inicio");
        btnHome.setVerticalTextPosition(javax.swing.SwingConstants.CENTER);

        javax.swing.GroupLayout pnlNavLayout = new javax.swing.GroupLayout(pnlNav);
        pnlNav.setLayout(pnlNavLayout);
        pnlNavLayout.setHorizontalGroup(
            pnlNavLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlNavLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pnlNavLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(btnHome, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(btnShowBackupView, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        pnlNavLayout.setVerticalGroup(
            pnlNavLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlNavLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(btnHome, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 385, Short.MAX_VALUE)
                .addComponent(btnShowBackupView, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addComponent(pnlNav, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(pnlContent, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnlContent, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(pnlNav, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
    }// </editor-fold>//GEN-END:initComponents

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton btnHome;
    private com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton btnShowAccountSubtypeView;
    private com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton btnShowAccountView;
    private com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton btnShowBackupView;
    private com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton btnShowFormView;
    private com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton btnShowGeneralLedgerView;
    private com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton btnShowJournalView;
    private com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton btnShowTrialBalanceView;
    private com.nutrehogar.sistemacontable.ui_2.component.DefaultPanelButton btnShowUserView;
    private javax.swing.JPanel pnlContent;
    private javax.swing.JPanel pnlGroupBtn;
    private javax.swing.JPanel pnlHome;
    private javax.swing.JPanel pnlNav;
    // End of variables declaration//GEN-END:variables

}
